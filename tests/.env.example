# Prefer a real .env at repo root; fall back to tests/.env.example
ENV_FILE := $(if $(wildcard .env),.env,tests/.env.example)
COMPOSE := docker compose --env-file $(ENV_FILE) -f infra/docker/compose.yml

CH_CONTAINER := fxai-clickhouse

.PHONY: up down restart logs deps init-db cli run print-env

# ... (other existing targets)

run:
	# existing run target commands here

# Show which env file compose will use
print-env:
	@echo "Using env file: $(ENV_FILE)" && \
	if [ "$(ENV_FILE)" = "tests/.env.example" ]; then \
		echo "(Tip) Create a real .env at the repo root to override example values."; \
	fi